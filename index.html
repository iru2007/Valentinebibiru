<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Valentino ðŸ’•</title>

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&family=Pacifico&display=swap" rel="stylesheet">

  <style>
    :root{
      --pink:#ff4d8d;
      --pink2:#ff2d55;
      --soft:#ffe6ee;
      --soft2:#fff1f5;
      --text:#3a1f2a;
      --card:#ffffffd9;
      --shadow: 0 20px 60px rgba(255,45,85,.22);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; margin:0; }
    body{
      font-family:"Quicksand",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      overflow:hidden;
      background:
        radial-gradient(1200px 800px at 20% 10%, var(--soft), transparent 60%),
        radial-gradient(1000px 700px at 85% 30%, #ffd1dd, transparent 55%),
        radial-gradient(900px 600px at 40% 90%, #ffe6ee, transparent 55%),
        linear-gradient(135deg, var(--soft2), #fff);
    }

    /* Layer effetti */
    #fx, #fx2{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index: 999;
    }

    .heart{
      position:absolute;
      font-size: 20px;
      user-select:none;
      text-shadow: 0 10px 22px rgba(255,45,85,.16);
      will-change: transform, opacity;
    }

    /* Cuori burst (prima pagina) */
    .burst{
      animation: burstFly 1.6s ease-out forwards;
    }
    @keyframes burstFly{
      0%   { opacity:0; transform: translate(var(--x0), var(--y0)) scale(.7); }
      10%  { opacity:1; }
      100% { opacity:0; transform: translate(var(--x1), var(--y1)) scale(1.35); }
    }

    /* Pioggia/galleggio (seconda pagina) */
    .rain{
      opacity:.85;
      animation: rainFall linear forwards;
    }
    @keyframes rainFall{
      0%   { transform: translateY(-12vh) rotate(0deg); opacity:0; }
      8%   { opacity:.85; }
      100% { transform: translateY(112vh) rotate(14deg); opacity:0; }
    }

    /* Layout pagine */
    .stage{
      height:100%;
      width:100%;
      display:grid;
      place-items:center;
      padding: 18px;
      position:relative;
    }

    .page{
      width: min(820px, 100%);
      min-height: 520px;
      background: var(--card);
      border: 1px solid rgba(255,77,141,.22);
      border-radius: 28px;
      box-shadow: var(--shadow);
      padding: clamp(22px, 4vw, 44px);
      backdrop-filter: blur(10px);
      position:absolute;
      inset:auto;
      opacity:0;
      transform: translateY(12px) scale(.98);
      transition: opacity .55s ease, transform .55s ease;
      pointer-events:none;
    }

    .page.active{
      opacity:1;
      transform: translateY(0) scale(1);
      pointer-events:auto;
    }

    /* Card interno prima pagina */
    .photo-wrapper{
      display:flex;
      justify-content:center;
      margin: 4px 0 18px;
    }
    .photo{
      width: clamp(110px, 22vw, 150px);
      height: clamp(110px, 22vw, 150px);
      border-radius:50%;
      object-fit:cover;
      border:5px solid var(--pink);
      box-shadow: 0 0 0 7px rgba(255,77,141,.18),
                  0 18px 40px rgba(255,77,141,.28);
      background:#fff;
    }

    h1{
      font-family:"Pacifico",cursive;
      font-weight:400;
      line-height:1.08;
      text-align:center;
      margin: 6px 0 12px;
      font-size: clamp(30px, 5.2vw, 58px);
      color:#4a1a2d;
    }

    .subtitle{
      text-align:center;
      margin: 0 auto 22px;
      max-width: 56ch;
      font-size: clamp(14px, 2.1vw, 18px);
      opacity:.9;
    }

    .buttons{
      display:flex;
      justify-content:center;
      gap: 14px;
      flex-wrap:wrap;
      margin-top: 8px;
      position:relative;
      min-height: 120px; /* spazio per il NO che scappa */
      padding-top: 8px;
    }

    .btn{
      border:0;
      border-radius:999px;
      padding: 14px 24px;
      font-size: 18px;
      font-weight: 700;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      min-width: 124px;
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .btn:active{ transform: scale(.98); }

    .btn-yes{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:#fff;
      box-shadow: 0 16px 35px rgba(255,45,85,.28);
    }
    .btn-yes:hover{ transform: translateY(-1px); box-shadow: 0 18px 40px rgba(255,45,85,.34); }

    .btn-no{
      background: rgba(255,77,141,.10);
      border: 2px solid rgba(255,77,141,.35);
      color:#7a2743;
      position:absolute;
      left: 50%;
      top: 10px;
      transform: translateX(170px);
      box-shadow: 0 10px 25px rgba(255,77,141,.12);
    }

    @media (max-width: 420px){
      .buttons{ padding-top: 62px; }
      .btn{ width: min(320px, 100%); }
      .btn-no{
        left: 50%;
        top: 62px;
        transform: translateX(-50%);
      }
    }

    .message{
      margin-top: 18px;
      text-align:center;
      font-size: clamp(16px, 2.3vw, 20px);
      font-weight:700;
      min-height: 1.4em;
    }

    /* Seconda pagina sorpresa */
    .surprise{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;
      min-height: 520px;
      position:relative;
      overflow:hidden;
    }

    .surprise h2{
      font-family:"Pacifico",cursive;
      font-weight:400;
      font-size: clamp(40px, 7vw, 84px);
      margin: 0 0 10px;
      color:#4a1a2d;
      text-shadow: 0 18px 40px rgba(255,45,85,.14);
    }

    .surprise .big-heart{
      font-size: clamp(44px, 9vw, 96px);
      margin: 8px 0 18px;
      filter: drop-shadow(0 18px 26px rgba(255,45,85,.14));
    }

    .surprise p{
      margin:0;
      font-size: clamp(14px, 2.2vw, 18px);
      opacity:.9;
      max-width: 56ch;
    }

    .pill{
      margin-top: 18px;
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 14px;
      border-radius:999px;
      border: 1px solid rgba(255,77,141,.22);
      background: rgba(255,77,141,.08);
      font-weight:700;
    }
  </style>
</head>

<body>
  <div id="fx" aria-hidden="true"></div>
  <div id="fx2" aria-hidden="true"></div>

  <div class="stage">
    <!-- PAGINA 1 -->
    <main class="page active" id="page1">
      <div class="photo-wrapper">
        <!-- Cambia foto.jpg con il nome della vostra foto -->
        <img src="foto.jpg" alt="Noi ðŸ’•" class="photo">
      </div>

      <h1>Vuoi essere il mio valentino bibi? ðŸ’•</h1>
      <p class="subtitle">Prometto: tante coccole, risate e un sacco di momenti belli insieme ðŸ’•</p>

      <div class="buttons" id="buttons">
        <button class="btn btn-yes" id="yesBtn">SÃ¬</button>
        <button class="btn btn-no" id="noBtn" aria-label="No (impossibile)">No</button>
      </div>

      <div class="message" id="msg" aria-live="polite"></div>
    </main>

    <!-- PAGINA 2 (SORPRESA) -->
    <section class="page" id="page2">
      <div class="surprise">
        <h2>TI AMO!! ðŸ’•</h2>
        <div class="big-heart">ðŸ’•</div>
        <p>
          Sei la mia persona preferita. Grazie per esserci sempre ðŸ’•
        </p>
        <div class="pill">Per sempre noi ðŸ’•</div>
      </div>
    </section>
  </div>

  <script>
    const page1 = document.getElementById("page1");
    const page2 = document.getElementById("page2");
    const card = page1; // per compatibilitÃ  con vecchio nome
    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const msg = document.getElementById("msg");
    const fx = document.getElementById("fx");
    const fx2 = document.getElementById("fx2");

    const isTouch = matchMedia("(hover: none)").matches || navigator.maxTouchPoints > 0;

    function moveNoButton(){
      const rect = page1.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();
      const pad = 16;

      const minX = pad;
      const maxX = rect.width - b.width - pad;
      const minY = pad + 120; // evita titolo/foto
      const maxY = rect.height - b.height - pad;

      const x = Math.random() * (maxX - minX) + minX;
      const y = Math.random() * (maxY - minY) + minY;

      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";
      noBtn.style.transform = "translateX(0)";
    }

    noBtn.addEventListener("mouseover", () => moveNoButton());
    noBtn.addEventListener("touchstart", (e) => {
      e.preventDefault();
      moveNoButton();
    }, { passive:false });

    noBtn.addEventListener("click", (e) => {
      e.preventDefault();
      moveNoButton();
    });

    window.addEventListener("resize", () => {
      if (page1.classList.contains("active")) moveNoButton();
    });

    // Burst cuori (solo ðŸ’•)
    function burstHearts(originEl, amount = 70){
      const r = originEl.getBoundingClientRect();
      const ox = r.left + r.width/2;
      const oy = r.top + r.height/2;

      for(let i=0;i<amount;i++){
        const h = document.createElement("div");
        h.className = "heart burst";
        h.textContent = "ðŸ’•";

        const angle = Math.random() * Math.PI * 2;
        const dist  = 60 + Math.random() * 280;

        const x0 = (ox + (Math.random()*10 - 5)) + "px";
        const y0 = (oy + (Math.random()*10 - 5)) + "px";
        const x1 = (ox + Math.cos(angle)*dist) + "px";
        const y1 = (oy + Math.sin(angle)*dist - (80 + Math.random()*160)) + "px";

        h.style.setProperty("--x0", x0);
        h.style.setProperty("--y0", y0);
        h.style.setProperty("--x1", x1);
        h.style.setProperty("--y1", y1);
        h.style.fontSize = (14 + Math.random()*20) + "px";
        h.style.animationDuration = (1.15 + Math.random()*0.85) + "s";

        fx.appendChild(h);
        h.addEventListener("animationend", () => h.remove());
      }
    }

    // Pioggia di cuori sulla seconda pagina
    let rainTimer = null;
    function startHeartRain(){
      stopHeartRain();
      const spawn = () => {
        const h = document.createElement("div");
        h.className = "heart rain";
        h.textContent = "ðŸ’•";

        const size = 12 + Math.random()*26;
        h.style.fontSize = size + "px";
        h.style.left = (Math.random()*100) + "vw";
        h.style.animationDuration = (3.8 + Math.random()*3.2) + "s";
        h.style.animationDelay = "0s";

        fx2.appendChild(h);
        h.addEventListener("animationend", () => h.remove());
      };

      // densitÃ  cuori (puoi aumentare se vuoi)
      rainTimer = setInterval(() => {
        for(let i=0;i<4;i++) spawn();
      }, 180);
    }

    function stopHeartRain(){
      if(rainTimer) clearInterval(rainTimer);
      rainTimer = null;
      fx2.innerHTML = "";
    }

    function goToSurprise(){
      // transizione pagina
      page1.classList.remove("active");
      page2.classList.add("active");

      // avvia pioggia cuori
      startHeartRain();

      // un mega burst iniziale al centro schermo
      const dummy = { getBoundingClientRect: () => ({
        left: window.innerWidth/2, top: window.innerHeight/2, width: 0, height: 0
      })};
      burstHearts(dummy, 120);
      setTimeout(() => burstHearts(dummy, 80), 350);
    }

    yesBtn.addEventListener("click", () => {
      burstHearts(yesBtn, 80);
      msg.textContent = "Sapevo che avresti detto di sÃ¬! Ti amo amore ðŸ’•";
      noBtn.style.display = "none";

      // dopo un attimo vai alla sorpresa
      setTimeout(goToSurprise, 1100);
    });

    // Posizione iniziale su mobile
    window.addEventListener("load", () => {
      if (isTouch) moveNoButton();
    });
  </script>
</body>
</html>
